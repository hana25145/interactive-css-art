:root{
  --hue: 200; --sat: 92%; --lit: 60%;
  --mx: 50; --my: 50;
  --flip-speed: .62s;
  --flip-ease: cubic-bezier(.2,.7,.2,1);
  --bg: #0a0e18;

  --glow-strong: 0 0 26px hsl(var(--hue) var(--sat) var(--lit) / .85),
                 0 0 56px hsl(calc(var(--hue)+180) var(--sat) var(--lit) / .35);
  --glow-soft:   0 0 16px hsl(var(--hue) var(--sat) var(--lit) / .45),
                 0 0 34px hsl(calc(var(--hue)+180) var(--sat) var(--lit) / .25);
}
:root[data-theme="sunset"]{ --hue: 18; }
:root[data-theme="mint"]  { --hue: 160; }
:root[data-theme="violet"]{ --hue: 276; }

*{ box-sizing:border-box }
html,body{ height:100% }
body{
  margin:0; background:var(--bg); color:#e9ecff; overflow:hidden; cursor:none;
  font-family:ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans KR", Arial;
  -webkit-font-smoothing:antialiased; text-rendering:optimizeLegibility;
}

/* 배경 패럴럭스 */
.stage{
  position:fixed; inset:0; display:grid; place-items:center;
  background:
    radial-gradient(120vmax 120vmax at calc(var(--mx)*1%) calc((var(--my)-30)*1%), hsl(calc(var(--hue)+40) 70% 18% / .35), transparent 55%),
    radial-gradient(120vmax 120vmax at calc((100 - var(--mx))*1%) calc((var(--my)+30)*1%), hsl(calc(var(--hue)+220)70% 14% / .35), transparent 55%),
    var(--bg);
}

/* 돌아가기 */
.back{ position:fixed; left:12px; top:12px; text-decoration:none; z-index:40 }

/* 시계 레이아웃 */
.clock{
  display:flex; align-items:center; gap:min(3vmin,32px);
  filter: drop-shadow(var(--glow-soft)); perspective: 1200px;
}
.sep{
  font-size: clamp(28px, 9vmin, 64px);
  line-height: 1; opacity:.9; text-shadow: var(--glow-soft);
}

/* 그룹(두 자리) */
.group{ display:flex; gap:min(1.8vmin,16px) }

/* ===== 핵심: 한 자리 카드 구조 ===== */
/* 카드 높이 변수를 명시: 모든 자식이 이 높이를 기준으로 반씩 잘립니다 */
.flip{
  --H: clamp(54px, 18vmin, 190px);
  position: relative;
  width: clamp(40px, 14vmin, 150px);
  height: var(--H);
  perspective: 900px;
  isolation: isolate; /* 겹침/잔상 방지 */
}

/* 각 절반은 '정확히' 반 높이 + overflow:hidden */
.half, .back-top, .back-bot{
  position: absolute;
  left: 0;
  width: 100%;
  height: 50%;
  overflow: hidden;

  /* 글꼴/광채만 남기고 센터링은 제거(숫자 배치는 .val에서 절대위치로 제어) */
  font-weight: 800;
  letter-spacing: .04em;
  color: #f6f7ff;
  text-shadow: var(--glow-strong);
  backface-visibility: hidden;
  transform-style: preserve-3d;
}

/* z-순서 (윗면이 항상 맨 위) */
.top{ top: 0; z-index: 4; border-bottom: 1px solid #ffffff14; }
.bot{ bottom: 0; z-index: 1; }
.back-top{ top: 0; z-index: 3; transform-origin: bottom; transform: rotateX(180deg); border-bottom: 1px solid #ffffff14; }
.back-bot{ bottom: 0; z-index: 2; transform-origin: top;   transform: rotateX(-180deg); }

/* 숫자 자체는 카드 전체 높이(--H)로 잡고 절대 위치시킵니다 */
.val{
  position: absolute;
  left: 0; width: 100%;
  height: var(--H);
  line-height: var(--H);
  font-size: clamp(32px, 12vmin, 140px);
  text-align: center;
}

/* 위쪽 절반: 카드의 '윗부분'이 보이게 */
.top .val,
.back-top .val { top: 0; }

/* 아래쪽 절반: 카드를 반 장 위로 올려서 '아랫부분'만 보이게 */
.bot .val,
.back-bot .val { top: calc(-0.5 * var(--H)); }

/* 플립 애니메이션은 그대로 */
.flip.play .top{      animation: flipTop var(--flip-speed) var(--flip-ease) both; }
.flip.play .back-bot{ animation: flipBot var(--flip-speed) var(--flip-ease) both; }


@keyframes flipTop{
  0%   { transform: rotateX(0deg); }
  100% { transform: rotateX(-180deg); }
}
@keyframes flipBot{
  0%   { transform: rotateX(-180deg); }
  100% { transform: rotateX(0deg); }
}

/* 날짜 + HUD */
.date{ margin-top:16px; font-size: clamp(12px, 2.3vmin, 16px); letter-spacing:.04em; opacity:.85; filter: drop-shadow(var(--glow-soft)); }
.hud{ position:fixed; right:12px; bottom:10px; display:grid; gap:6px; z-index:30; }
.hud #pill{
  justify-self:end; background:#0e1322; border:1px solid #ffffff1a; border-radius:999px; padding:6px 10px;
  font: 12px/1.2 ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; color:#cfe2ff;
  box-shadow: var(--glow-soft); opacity:.9; user-select:none;
}

/* 접근성 */
@media (prefers-reduced-motion:reduce){ :root{ --flip-speed:.9s } }
